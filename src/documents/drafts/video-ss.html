---
# Coded by this tutorial: http://tympanus.net/codrops/2012/09/19/fullscreen-video-slideshow-with-bigvideo-js/
# Adapted for latest version Video.js

layout: 'default'
title: 'Заказная разработка'
libBigVideo: true
libJqueryUI: true
libVideo: true
libImagesLoaded: true
libModernizr: true
libTransit: true
head: |
	<style type="text/css">
		html, body {
			margin: 0;
			padding: 0;
			color: #fff;
			overflow: hidden;
			font-weight: 300;
			font-size: 1em;
		}
		header {
			position: absolute;
			top: 50%;
			left: 50%;
			z-index: 999;
			color: #fff;
			background: rgba(0,0,0,0.5);
			padding: 60px;
			width: 400px;
			height: 400px;
			border-radius: 50%;
			margin: -200px 0 0 -200px;
			text-align: center;
		}
		.wrapper {
			position: absolute;
			width: 500%;
			height: 100%;
			z-index: 0;
		}
		.screen {
			position: relative;
			height: 100%; 
			width: 20%; /*  NOTE:numVideos/100%  */
			float: left;
			overflow: hidden;
		}
		.big-image {
			min-width: 100%;
			min-height: 100%; 
			height: auto;
			width: auto; 
		}
		.video-title {
			position: absolute;
			bottom: 5%;
			left: 5%;
			margin: 5px;
			padding: 0 15px 15px 15px;
			background: rgba(0,0,0,0.5);
		}
		nav {
			position:absolute; 
			right: 5%; 
			top: 45%; 
			padding: 20px; 
			background: #000; 
			border-radius: 40px; 
			opacity: .4; 
			cursor: pointer;}
			nav: hover {
			opacity: .6;
		} 
		.next-icon {
			display: block;
			border-top: solid 2px #fff; 
			border-right: solid 2px #fff; 
			width: 20px; 
			height: 20px;
			position: relative;
			left: -5px;
			-webkit-transform: rotate(45deg);
			-moz-transform: rotate(45deg);
			-ms-transform: rotate(45deg);
			-o-transform: rotate(45deg);
			transform: rotate(45deg);
			color: #fff;
			text-decoration: none;
		}
	</style>
bottom: |
	<script>
        $(function() {

            // Use Modernizr to detect for touch devices, 
            // which don't support autoplay and may have less bandwidth, 
            // so just give them the poster images instead
            var screenIndex = 1,
                numScreens = $('.screen').length,
                isTransitioning = false,
                transitionDur = 1000,
                BV,
                videoPlayer,
                isTouch = Modernizr.touch,
                $bigImage = $('.big-image'),
                $window = $(window);
            
            if (!isTouch) {
                // initialize BigVideo
                BV = new $.BigVideo({forceAutoplay:isTouch});
                BV.init();
                showVideo();
                
                BV.getPlayer().on('loadeddata', function() {
                    onVideoLoaded();
                });
                // adjust image positioning so it lines up with video
                $bigImage
                    .css('position','relative')
                    .imagesLoaded(adjustImagePositioning);
                // and on window resize
                $window.on('resize', adjustImagePositioning);
            }
            // Next button click goes to next div
            $('#next-btn').on('click', function(e) {
                e.preventDefault();
                if (!isTransitioning) {
                    next();
                }
            });
            function showVideo() {
                BV.show($('#screen-'+screenIndex).attr('data-video'),{ambient:true});
            }
            function next() {
                isTransitioning = true;
                // update video index, reset image opacity if starting over
                if (screenIndex === numScreens) {
                    $bigImage.css('opacity',1);
                    screenIndex = 1;
                } else {
                    screenIndex++;
                }
                if (!isTouch) {
                    $('#big-video-wrap').transit({'left':'-100%'},transitionDur)
                } 
                (Modernizr.csstransitions)?
                    $('.wrapper').transit(
                        {'left':'-'+(100*(screenIndex-1))+'%'},
                        transitionDur,
                        onTransitionComplete):
                    onTransitionComplete();
            }
            function onVideoLoaded() {
                $('#screen-'+screenIndex).find('.big-image').transit({'opacity':0},500)
            }
            function onTransitionComplete() {
                isTransitioning = false;
                if (!isTouch) {
                    $('#big-video-wrap').css('left',0);
                    showVideo();
                }
            }
            function adjustImagePositioning() {
                $bigImage.each(function(){
                    var $img = $(this),
                        img = new Image();
                    img.src = $img.attr('src');
                    var windowWidth = $window.width(),
                        windowHeight = $window.height(),
                        r_w = windowHeight / windowWidth,
                        i_w = img.width,
                        i_h = img.height,
                        r_i = i_h / i_w,
                        new_w, new_h, new_left, new_top;

                    if( r_w > r_i ) {
                        new_h   = windowHeight;
                        new_w   = windowHeight / r_i;
                    } else {
                        new_h   = windowWidth * r_i;
                        new_w   = windowWidth;
                    }
                    $img.css({
                        width   : new_w,
                        height  : new_h,
                        left    : ( windowWidth - new_w ) / 2,
                        top     : ( windowHeight - new_h ) / 2
                    })
                });
            }
        });
    </script>
---
<header>
    <h1>Видео слайдшоу</h1>
	<p>Кодинг по вот этой статье:<br/><a target="_blank" href="http://tympanus.net/codrops/2012/09/19/fullscreen-video-slideshow-with-bigvideo-js">Fullscreen Video Slideshow with BigVideo.js</a></p>
	<p>Адаптировано к последней версии Video.js</p>
</header>
<div class="wrapper">
	<div class="screen" id="screen-1" data-video="/video/box_color_640x424.mp4">
		<img src="/video/box_color_640x424.jpg" class="big-image" />
		<div class="video-title">
			<h1>Страница 1</h1>
			<p>Источник видео: <a target="_blank" href="http://vimeo.com/9379803">http://vimeo.com/9379803</a>. Лицензия Creative Commons</p>
		</div>
	</div>
	<div class="screen" id="screen-2" data-video="/video/circ.hole_(loop)_1280x720.mp4">
		<img src="/video/circ.hole_(loop)_1280x720.jpg" class="big-image" />
		<div class="video-title">
			<h1>Страница 2</h1>
			<p>Источник видео: <a target="_blank" href="http://vimeo.com/15533570">http://vimeo.com/15533570</a>. Лицензия Creative Commons</p>
		</div>
	</div>
	<div class="screen" id="screen-3" data-video="/video/datacity_(loop)_1280x720.mp4">
		<img src="/video/datacity_(loop)_1280x720.jpg" class="big-image" />
		<div class="video-title">
			<h1>Страница 3</h1>
			<p>Источник видео: <a target="_blank" href="http://vimeo.com/29966720">http://vimeo.com/29966720</a>. Лицензия Creative Commons</p>
		</div>
	</div>
</div>
<nav id="next-btn">
    <a href="#" class="next-icon"></a>
</nav>
