!function(){function navigation(){function pageAnim(){return pageCursor=pageCursor==pageAns.length-1?0:pageCursor+1,pageAns[pageCursor]}function imgAnim(){return imgCursor=imgCursor==imgAns.length-1?0:imgCursor+1,imgAns[imgCursor]}function bgImage(t){var a=$($(t).attr("data-bg")),e="undefined"!=typeof lastBackgrounds[t]&&lastBackgrounds[t]<a.length-1?lastBackgrounds[t]+1:0,i=$(".static-img");return i.length>0&&i[0].src===a[e].src&&(e=e<a.length-1?e+1:0),lastBackgrounds[t]=e,$(a[e])}function bgVideoUrl($img,func){var bandwReservRatio=1.3,dvStr=$img.attr("data-video");if(dvStr){var dv=eval("("+dvStr+")");bytesPS.get(function(t){for(var a=null,e=null,i=0;i<dv.urls.length;i++){(null===a||dv.urls[i].bytes<a.bytes)&&(a=dv.urls[i]);var n=bandwReservRatio*dv.urls[i].bytes/t;n<dv.sec&&(null===e||dv.urls[i].bytes>e.bytes)&&(e=dv.urls[i])}func(null===e?a.url:e.url)})}else func($img.attr("src").replace(/.jpg$/,".mp4"))}function nav(t){function a(){var t=pageAnim();$hash.css(t[0]),takeLayer($hash,"anim-page");var a;if(isIE8){var e=$("head");a=$('<style type="text/css">.page :before,.page :after{content:none !important}</style>'),e.append(a)}$hash.transition(t[1],duration,function(){takeLayer($hash,"static-page"),"none"!==$("nav").css("background-image")&&($("nav").css({"background-image":"none"}),Modernizr.opacity&&($("#side-nav").css({"background-color":"rgba(51, 51, 51,1)"}),$("#side-nav").transition({"background-color":"rgba(204, 51, 0,.6)"},1e3))),isIE8&&a.remove()})}if(t=t&&"#"!=t?t.replace("#!","#"):"#index",$hash=$(t),!($hash.length<1)){var e=bgImage(t);if($(".static-img").length>0&&$("nav").css({"background-image":"url(/images/fuzz.gif)"}),"visible"==e.css("visibility"))a();else{var i=imgAnim(),n=i[0];adjustImageCss(e,n,function(){e.css(n);var t=i[1];adjustImageCss(e,t,function(){takeLayer(e,"anim-img"),e.transition(t,duration,function(){adjustImageCss(e,t,function(){e.css(t)}),$("body").css("background-image","none"),Modernizr.touch||(null===BV&&(BV=new $.BigVideo,BV.init()),bgVideoUrl(e,function(t){BV.show(t,{ambient:!0}),BV.getPlayer().on("playing",function(){$(".static-img").css({visibility:"hidden"})})})),cleanLayer("static-page"),takeLayer(e,"static-img"),a()})})})}}}function cleanLayer(t){$("."+t).each(function(){var a=$(this);a.css({visibility:"hidden"}),a.removeClass(t)})}function toLayer(t,a){t.css({visibility:"visible"}),t.removeClass("static-page static-img anim-page anim-img"),t.addClass(a)}function takeLayer(t,a){cleanLayer(a),toLayer(t,a)}function adjustImageCss(t,a,e){var i=new Image;i.onload=function(){var t,n,s=$(window).width(),o=$(window).height(),r=i.width,c=i.height,l=s/o,f=r/c;l>f?(t=s,n=t/f):(n=o,t=f*n),a.width=Math.round(t),a.height=Math.round(n),a["margin-top"]=0===parseInt(a.top)?Math.round((o-n)/2)+"px":"-100%"==a.top?Math.round(o-n)+"px":0,a["margin-left"]=0===parseInt(a.left)?Math.round((s-t)/2)+"px":"-100%"==a.left?Math.round(s-t)+"px":0,e(a)},i.src=t.attr("src")}var duration=500,topDelta="90px",leftDelta="25px",zOff=900,zStaticImg=500,zStaticPage=600,zAnimImg=700,zAnimPage=800,isOff=!1,isPreOff=!1,pageAns=[[{left:"-100%",top:0,"margin-top":topDelta},{left:0,"margin-left":leftDelta,top:0,"margin-top":topDelta}],[{left:0,"margin-left":leftDelta,top:"-100%"},{left:0,"margin-left":leftDelta,top:0,"margin-top":topDelta}],[{left:"100%",top:0,"margin-top":topDelta},{left:0,"margin-left":leftDelta,top:0,"margin-top":topDelta}],[{left:0,"margin-left":leftDelta,top:"100%"},{left:0,"margin-left":leftDelta,top:0,"margin-top":topDelta}]],imgAns=[[{left:0,top:"-100%"},{left:0,top:0}],[{left:"100%",top:0},{left:0,top:0}],[{left:0,top:"100%"},{left:0,top:0}],[{left:"-100%",top:0},{left:0,top:0}]],pageCursor=0,imgCursor=0,lastBackgrounds={},BV=null,clickHash=null,BytesPerSec=function(){var t=this;this.q=[];var a=$.cookie("bytesPerSec");this.bytesPerSec=a?a:null,null===this.bytesPerSec&&$(window).load(function(){var a,e,i,n,s=Math.random(),o="/images/bandwidth0.jpg?n="+s,r="/images/bandwidth1.jpg?n="+s,c=16614,l="/images/bandwidth2.jpg?n="+s,f=73214,g=new Image,h=new Image,u=new Image;g.onload=function(){h.onload=function(){e=(new Date).getTime();var s=(e-a)/1e3;u.onload=function(){n=(new Date).getTime();var a=(n-i)/1e3,e=a-s;t.bytesPerSec=e>0?(f-c)/e:0!==a?f/a:0!==s?c/s:f/.001,$.cookie("bytesPerSec",t.bytesPerSec),t.runQ()},i=(new Date).getTime(),u.src=l},a=(new Date).getTime(),h.src=r},g.src=o}),this.get=function(t){this.q.push(t),this.runQ()},this.runQ=function(){if(null!==this.bytesPerSec){for(var t=0;t<this.q.length;t++)this.q[t](this.bytesPerSec);this.q=[]}}},bytesPS=new BytesPerSec;$.support.transition||($.fn.transition=$.fn.animate),$("a").each(function(){this.hash&&(this.hash=this.hash.replace("#","#!"))}),nav(location.hash),$("nav a").click(function(t){function a(){isPreOff=!0,$("#on").addClass("inactive"),$("#off").css({display:"none"}),$("#on").css({display:"block"}),$("body").append('<div id="off-bg" style="z-index:'+zOff+';"><i class="fa fa-smile-o fa-lg"></i></div>'),Modernizr.opacity?($("#off-bg").css({opacity:0}),$("#side-nav").transition({opacity:.3},200),$("#off-bg").transition({opacity:1},300,function(){$("#off-bg").css("background-image","url(/images/fuzz.gif)"),isOff=!0,isPreOff=!1,$("#on").removeClass("inactive")})):($("#off-bg").css("background-image","url(/images/fuzz.gif)"),isOff=!0,isPreOff=!1,$("#on").removeClass("inactive")),clickHash=location.hash}function e(){$("#off").addClass("inactive"),$("#off").css({display:"block"}),$("#on").css({display:"none"}),Modernizr.opacity?($("#side-nav").transition({opacity:1},duration/2),$("#off-bg").css("background-image","none").transition({opacity:0},duration,function(){$("#off-bg").remove(),isOff=!1,$("#off").removeClass("inactive")})):($("#off-bg").remove(),isOff=!1,$("#off").removeClass("inactive"))}if("?off=1"===this.search)isOff||a(),t.preventDefault();else if("?on=1"==this.search)isOff&&e(),t.preventDefault();else if(isPreOff)t.preventDefault();else{isOff&&e();var i=location.hash?location.href.replace(location.hash,""):location.href.replace(/#$/,""),n=this.hash?this.href.replace(this.hash,""):this.href.replace(/#$/,"");this.hash&&n==i?(nav(this.hash),clickHash=this.hash,location.hash=this.hash,t.preventDefault()):n==i&&(nav(this.hash),clickHash="",location.hash="",t.preventDefault())}}),$(window).on("hashchange",function(){var t="#"==location.hash?"":location.hash;t!==clickHash&&nav(location.hash)}),$(window).on("resize",function(){$(".static-img").each(function(){$img=$(this),adjustImageCss($img,{top:0,left:0},function(t){$img.css(t)})})})}var isIE8;$(function(){isIE8=$("html").hasClass("ie8");var t=function(){$(".navbar-collapse.in, #side-padding.in").collapse("hide").css("height","")};$(".navbar-collapse").click("li",t),$(window).on("resize",t),$(".page").wrapInner('<div class="col-sm-9 page-content"></div>'),$(".page").append('<div class="col-sm-3"></div>'),$(".page-content").each(function(){for(var t=0;100>t;t++)$(this).append('<div class="sqrIco"></div>')}),navigation()})}.call(this);