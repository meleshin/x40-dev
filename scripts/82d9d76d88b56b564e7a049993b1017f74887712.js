!function(){$(function(){function a(){var e=$(".video-bg>video"),i=$(".img-bg>img"),o=l?e.length:i.length;if(o<h.length){var s,n,t=h[o],c=t.w,r=t.h,d=$(window).width(),p=$(window).height(),g=c/r,v=d/p;g>v?(n=p,s=n*g):(s=d,n=s/g);var u=(p-n)/2,m=(d-s)/2,f={width:s+"px",height:n+"px",left:m+"px",top:u+"px"},b=$('<div class="img-bg"></div>');b.appendTo("#img-bg-wrap"),b.css(f);var w=$("<img />");w.load(function(){if(w.appendTo(b),l){var e=$('<div class="video-bg"></div>');e.appendTo("#video-bg-wrap");var i=$("<video webkit-playsinline loop></video>");e.css(f),i[0].muted=t.audio?!1:!0,i.one("canplaythrough",function(){i.appendTo(e);var s=$.cookie("maxLoadedClip");(!s||o>s)&&$.cookie("maxLoadedClip",o),t.videoLoadQ&&t.videoLoadQ(),a()}),i.on("abort canplay canplaythrough durationchange emptied ended error loadeddata loadedmetadata loadstart pause play playing ratechange seeked seeking stalled volumechange waiting",function(a){console.log(this.src+": "+a.type)}),i[0].src=t.src,i[0].load()}t.imgLoadQ&&t.imgLoadQ(),l||a()}),w[0].src=t.src.replace(/.mp4$/,".jpg")}}function e(a){var e=$(".video-bg>video"),i=$(".img-bg>img"),s=$.cookie("maxLoadedClip"),n=l?e.length:i.length;g>=n&&(!s||g>s)&&(g=0,$.cookie("lastClipCursor",0)),i.length<=g?h[g].imgLoadQ=function(){h[g].imgLoadQ=!1,a($($(".img-bg>img")[g])),l||o()}:(a($(i[g])),l||o())}function i(a){if(l){var e=$(".video-bg>video");e.length<=g?h[g].videoLoadQ=function(){h[g].videoLoadQ=!1,a($($(".video-bg>video")[g])),o()}:(a($(e[g])),o())}}function o(){g<h.length-1?g++:g=0,$.cookie("lastClipCursor",g)}function s(){var a=function(){$(".navbar-collapse.in, #side-padding.in").collapse("hide"),$("#side-padding").css("height","")};$(".navbar-collapse").click("li",a),$(window).on("resize",a);var e=$(".page");e.wrapInner('<div class="col-sm-9 page-content"></div>'),$('<div class="col-sm-3"></div>').appendTo(e),e.wrapInner('<div class="page-paper"></div>'),$('<div class="film1"></div>').insertBefore($(".page-paper")),$('<div class="film2"></div>').insertAfter($(".page-paper")),$(".page-paper").scroll(function(){var a=Math.round($(this).scrollTop()/4),e=Math.abs((180+a)%360-180),i=Math.abs((360+a)%360-180),o=Math.abs((300+a)%360-180);Modernizr.opacity?$("#side-nav").css({"background-color":"rgba("+e+", "+i+", "+o+", 0.7)"}):$("#side-nav").css({"background-color":"rgb("+e+", "+i+", "+o+")"})}),$("#side-nav a").each(function(){$(this).attr("data-hover",$(this).text())})}function n(){function a(a){var s=a.hash;if(s=s&&"#"!=s?s.replace("#!","#"):"#index",$hash=$(s),!($hash.length<1||$hash.hasClass("in")||$hash.hasClass("sf-in"))){$(".page.in").length>0&&($("#side-nav a.active").css("color","#FF7D8D"),$("#side-nav a").css("color","#FF7D8D"),Modernizr.opacity&&t.css({"background-color":"rgba(0, 0, 0, 0.7)"})),$("a").each(function(){$(this).parents("li").removeClass("active"),$(this).removeClass("active"),(this.href==a.href||this.href+"#"==a.href)&&($(this).parents("li").addClass("active"),$(this).addClass("active"))});var n="rollIn",r="bounceOutDown",l="fadeInDown",h="bounceOutRight";e(function(a){function e(){function a(){$(".page.over, #img-bg-wrap img.over").removeClass("over");var a=$(s+" .page-paper"),e=a.getNiceScroll(0);e?e.show():a.niceScroll({zindex:1e5,autohidemode:!0,horizrailenabled:!0,cursoropacitymin:.6,cursoropacitymax:1,background:"transparent",cursorborder:"1px solid #fff",cursorwidth:"8px",cursorcolor:"rgb(200, 0, 0)"}),$("#side-nav a").css("color",""),Modernizr.opacity&&t.css({"background-color":c}),i(function(a){$(".video-bg video").each(function(){this.pause(),$(this).removeClass("in"),this.currentTime=0}),a.addClass("in"),o||a[0].play(),$("#img-bg-wrap img.in").removeClass(n+" in")})}$(".video-bg video").each(function(){$(this).removeClass("in"),this.currentTime=0}),$(".page-paper").each(function(){var a=$(this).getNiceScroll(0);a&&a.hide()}),Modernizr.cssanimations?$hash.hasClass("in")||($(".page.in").removeClass(l+" in").addClass(h+" out"),$hash.one(p,a),$hash.removeClass(h+" out").addClass("animated "+l+" in over")):$hash.hasClass("sf-in")?a():($(".page.in").removeClass("sf-in"),$hash.addClass("sf-in over"),$(".page.in").each(function(){var a=$(this);a.hasClass("sf-in")||"100%"==a.css("left")||a.animate({left:"100%",top:0,opacity:0},d,function(){$(this).removeClass("in")})}),$hash.addClass("in"),$hash.css({left:0,top:"-100%",opacity:0}),$hash.animate({left:0,top:0,opacity:1},d,a))}$(".video-bg video").each(function(){this.pause()}),Modernizr.cssanimations?a.hasClass("in")||($("#img-bg-wrap img.in").removeClass(n+" in").addClass(r+" out"),a.one(p,e),a.removeClass(r+" out").addClass("animated "+n+" in over")):($("#img-bg-wrap img.in").removeClass("sf-in"),a.addClass("sf-in over"),$("#img-bg-wrap img").each(function(){var a=$(this);a.hasClass("sf-in")||"100%"==a.css("top")||a.animate({left:0,top:"100%"},d,function(){$(this).removeClass("in")})}),a.addClass("in"),a.css({left:"-100%",top:0,opacity:0}),a.animate({left:0,top:0,opacity:1},d,e))})}}var o=!1,s=!1,n=null,t=$("#side-nav"),c=t.css("background-color");$("a").each(function(){this.hash&&(this.hash=this.hash.replace("#","#!"))}),$(window).on("resize",function(){$("#page-wrapper>img.in").each(function(){adjustImg(this)})}),a(location),$("a").click(function(e){function i(){$(".video-bg video").each(function(){this.pause()}),$("#off").css({display:"none"}),$("#on").css({display:"block"}),t.css({opacity:.3});var a=$("#off-bg");a.css({display:"table","background-image":"url(/images/fuzz.gif)"}),setTimeout(function(){a.css({opacity:1})}),o=!0,n=location.hash}function c(){$("#off").css({display:"block"}),$("#on").css({display:"none"});var a=$("#off-bg");a.css({opacity:0}),t.css({opacity:1}),$.support.transition?setTimeout(function(){a.css({display:"none","background-image":"none"})},300):a.css({display:"none","background-image":"none"});var e=$(".video-bg video.in");e.length>0&&($(".video-bg video").each(function(){this.pause()}),e[0].play()),o=!1}if("?off=1"===this.search)o||i(),e.preventDefault();else if("?on=1"==this.search)o&&c(),e.preventDefault();else if(s)e.preventDefault();else{o&&c();var r=location.hash?location.href.replace(location.hash,""):location.href.replace(/#$/,""),l=this.hash?this.href.replace(this.hash,""):this.href.replace(/#$/,"");this.hash&&l==r?(a(this),n=this.hash,location.hash=this.hash,e.preventDefault()):l==r&&(a(this),n="",location.hash="",e.preventDefault())}}),$(window).on("hashchange",function(){var e="#"==location.hash?"":location.hash;e!==n&&a(location)})}function t(){var a=$("#sequence");if(a.length>0){var e={nextButton:!0,prevButton:!0,pagination:!0,animateStartingFrameIn:!0,autoPlay:!0,autoPlayDelay:3e3,preloader:!0,preloadTheseFrames:[1],preloadTheseImages:["images/newbigjob-t.png","images/newbigjob-m-t.png","images/mobivisor-t.png","images/surwave-t.png","images/surwave-m-t.png","images/vreggy-t.png","images/sigmahome-t.png","images/hitechhow-t.png","images/hth-crm-t.png","images/frescostudio-t.png"]},i=function(){$("#sequence>.sequence-canvas div[data-img]").each(function(){var a=$(this),e=a.attr("data-img"),i=$(window).width(),o=$(window).height();Modernizr.mq("only all")&&(580>=i||602>=o?e=e.replace(".png","-c.png"):925>=i||695>=o?e=e.replace(".png","-b.png"):(1199>=i||755>=o)&&(e=e.replace(".png","-a.png")));var s=a.find("img");(s.length<1||s.attr("src")!==e)&&(a.empty(),$('<img src="'+e+'" />').appendTo(a))})};$("#sequence .sequence-pagination .view").length<1&&($("#sequence>.sequence-canvas>li>.view").each(function(){var a=$(this).clone();a.find("div[data-img]").each(function(){var a=$(this);src=a.attr("data-img").replace(".png","-t.png"),$('<img src="'+src+'" />').appendTo(a)}),a.appendTo("#sequence .sequence-pagination")}),i(),$(window).on("resize",i)),$("#sequence").sequence(e).data("sequence")}}function c(){if(!Modernizr.opacity){for(var a=[["#top-nav",70],["#top-nav .navbar-toggle",80],["#top-nav .navbar-toggle:focus",20],["#top-nav li.navbar-text",80],["#side-nav",75],[".page-paper",90],[".page-content i",72],["#off-bg i",20],[".center-menu, .page-box",70],[".descr",70]],e=$("head"),i='<style type="text/css">',o=0;o<a.length;o++)i+=a[o][0]+' {-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity='+a[o][1]+')";}';i+="</style>",e.append($(i))}}var r=function(a){var e=document.createElement("video");return e.canPlayType?e.canPlayType(a):!1},l=""!=r("video/mp4")&&!Modernizr.touch,h=l?[{src:"video/cross6_(loop)_1280x720.mp4",w:1280,h:720},{src:"video/lightgrid_(loop)_1280x720.mp4",w:1280,h:720},{src:"video/datacity_(loop)_1280x720.mp4",w:1280,h:720},{src:"video/rmx_(loop)_1280x560.mp4",w:1280,h:560,audio:!0}]:[{src:"video/lightgrid_(loop)_1280x720.jpg",w:1280,h:720},{src:"video/cross6_(loop)_1280x720.jpg",w:1280,h:720},{src:"video/newprs_(loop)_1280x720.jpg",w:1280,h:720},{src:"video/nodes_(loop)_1280x720.jpg",w:1280,h:720}],d=800,p="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",g=function(){var a=$.cookie("lastClipCursor");return a?a:($.cookie("lastClipCursor",0),0)}();$("html").hasClass("ie8"),$("html").hasClass("ie9"),$("html").hasClass("ie10"),s(),t(),a(),n(),c()})}.call(this);