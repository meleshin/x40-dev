!function(){$(function(){function e(a,o,i){var n=$("#"+i+" .video-bg>video"),t=$("#"+o+" .img-bg>img"),s=i?n.length:t.length;if(s<a.length){var r=a[s],c=r.w,p=r.h,l=function(){var e,a,o=$(window).width(),i=$(window).height(),n=c/p,t=o/i;n>t?(a=i,e=Math.round(a*n)):(e=o,a=Math.round(e/n));var s=Math.round((i-a)/2),r=Math.round((o-e)/2);return{width:e+"px",height:a+"px",left:r+"px",top:s+"px"}},h=$('<div class="img-bg"></div>');h.appendTo("#"+o),h.css(l()),$(window).on("resize",function(){h.css(l())});var d=$("<img />");d.load(function(){if(d.appendTo(h),i){var n=$('<div class="video-bg"></div>');n.css(l()),$(window).on("resize",function(){n.css(l())}),n.appendTo("#"+i);var t=$("<video webkit-playsinline loop></video>");t[0].muted=r.audio?!1:!0,t.one("canplaythrough",function(){t.appendTo(n),r.videoLoadQ&&r.videoLoadQ(t),e(a,o,i)}),t[0].src=r.src,t[0].load()}r.imgLoadQ&&r.imgLoadQ(d),i||e(a,o,i)}),d[0].src=r.src.replace(/.mp4$/,".jpg")}}function a(e,o){if(g){var i=Processing.getInstanceById(e);i?o(i):setTimeout(function(){a(e,o)},100)}}function o(){var e=function(){$(".navbar-collapse.in, #side-padding.in").collapse("hide"),$("#side-padding").css("height","")};$(".navbar-collapse").click("li",e),$(window).on("resize",function(){e(),g&&$(".in .sketch").each(function(){a(this.id,function(e){var a=$(r+" .page-paper");e.size(a.width(),a.height())})})});var o=$(".page");o.wrapInner('<div class="col-sm-9 page-content"></div>'),$('<div class="col-sm-3 right"><div class="bg-author"></div></div>').appendTo(o),o.wrapInner('<div class="page-paper"></div>'),$('<div class="film1"></div>').insertBefore($(".page-paper")),$('<div class="film2"></div>').insertAfter($(".page-paper")),$(".page-paper").scroll(function(){var e=Math.round($(this).scrollTop()/4),a=Math.abs((180+e)%360-180),o=Math.abs((360+e)%360-180),i=Math.abs((300+e)%360-180);Modernizr.opacity?$("#side-nav").css({"background-color":"rgba("+a+", "+o+", "+i+", 0.7)"}):$("#side-nav").css({"background-color":"rgb("+a+", "+o+", "+i+")"})}),$("#side-nav a").each(function(){$(this).attr("data-hover",$(this).text())}),u&&($("#sketch-bg-wrap").addClass("layer").attr("data-depth","1"),s=$("#page-wrapper").parallax());var i,n,t=(new Date).getTime(),c=!1;$(window).mousemove(function(){var e=function(){var a=500,o=(new Date).getTime();o-t>a?($(".page-paper.move-out h1, .page-paper.move-out .bg-author, .page-paper.move-out .bg-author a, .page-paper.move-out i").cssAnOnly({color:""}),$(".page-paper.move-out").cssAnOnly({"background-color":""}).removeClass("move-out"),c=!1):(i&&clearTimeout(i),i=setTimeout(e,a))};if(!c||n!=r){c=!0;var a=$(r+" .page-paper");a.addClass("move-out"),a.cssAnOnly({"background-color":"rgba(0, 0, 0, .8)"}),$(r+" .page-paper h1, "+r+" .bg-author, "+r+" .bg-author a").cssAnOnly({color:"rgba(255, 255, 255, .5)"}),$(r+" .page-paper i").cssAnOnly({color:"rgba(140, 0, 30, 0.8)"}),e()}t=(new Date).getTime(),n=r})}function i(){function e(e){function i(a,o){function i(){if(l.removeClass(n),o&&o(),$.support.transition){var i,t=$(p+" .film1, "+p+" .film2"),s=t.css("background-position");i=s?s.split(" ")[0].replace("%","").replace("px",""):"0",C=-1*C;var r="0"==i?4*504*C:"0";setTimeout(function(){t.css({"background-position":r+"px"+" 0"})},100)}var h=$(p+" .page-paper"),d=h.getNiceScroll(0);d?d.show():(h.niceScroll({zindex:1e5,autohidemode:!0,horizrailenabled:!1,cursoropacitymin:.6,cursoropacitymax:1,background:"transparent",cursorborder:"1px solid #fff",cursorwidth:"8px",cursorcolor:"rgb(200, 0, 0)"}),$(p+" .nicescroll-rails").detach().appendTo("body")),$("a").each(function(){$(this).parents("li").removeClass("active"),$(this).removeClass("active"),(this.href==e.href||this.href+"#"==e.href)&&($(this).parents("li").addClass("active"),$(this).addClass("active"))}),a&&a(),c&&c.startAutoPlay()}var n="fadeInDown",r="bounceOutRight",h="pulse";$("#side-nav a").css("color",""),Modernizr.opacity&&($(p+" .page-paper").cssAnOnly({"background-color":""}),t.cssAn({"background-color":s})),$(".page-paper").each(function(){var e=$(this).getNiceScroll(0);e&&e.hide()}),Modernizr.cssanimations?l.hasClass("in")?i():($(".page.in").removeClass("in").addClass(r+" out"),l.one(b,i),l.removeClass(r+" out").addClass("animated "+n+" in over"),$(".page-box").removeClass(h),$(p+" .page-box").addClass("animated "+h)):l.hasClass("sf-in")?i():($(".page.in").removeClass("sf-in"),l.addClass("sf-in over"),$(".page.in").each(function(){var e=$(this);e.hasClass("sf-in")||"100%"==e.css("left")||e.animate({left:"100%",top:0,opacity:0},v,function(){$(this).removeClass("in")})}),l.addClass("in"),l.css({left:0,top:"-100%",opacity:0}),l.animate({left:0,top:0,opacity:1},v,i))}function n(e,n,t,s){function r(a){if(h)return a(),void 0;var o=t?$("#"+t+" .video-bg>video"):null,i=$("#"+n+" .img-bg>img"),s=t?o.length:i.length;l.hasClass("in")&&l.addClass("over"),u>=s&&(u=0,$.cookie("last-cursor-"+n,0)),i.length<=u?e[u].imgLoadQ=function(o){e[u].imgLoadQ=!1,a(o,e[u].link,e[u].author)}:a($(i[u]),e[u].link,e[u].author)}function c(a){if(h)return a(),void 0;if(t){var o=$("#"+t+" .video-bg>video");o.length<=u?e[u].videoLoadQ=function(o){e[u].videoLoadQ=!1,a(o)}:a($(o[u]))}else a(null)}var h="function"==typeof e?e:null,u=h?null:function(){var a=w[n];return w[n]<e.length-1?w[n]++:w[n]=0,$.cookie("last-cursor-"+n,w[n]),a}(),y=h?null:function(){var e=m<f.length-1?m+1:0,a=f[m];return m=e,a}(),k=h?null:"bounceOutDown";r(function(e,n,r){function l(){if(!h){e.removeClass(f.join(" "));var a=t?"Видео:":"Фон:",l=$(p+" .bg-author");l.empty(),n&&l.text(a+" ").append('<a target="_blank" href="'+n+'">'+r+"</a>")}$(".video-bg video").each(function(){$(this).removeClass("in"),this.currentTime=0}),i(function(){$(".page.over, img.over").removeClass("over"),c(function(e){$(".video-bg video").each(function(){this.pause(),$(this).removeClass("in"),this.currentTime=0}),e&&(e.addClass("in"),o||e[0].play(),$("img.in").removeClass(f.join(" ")+" in"))})},s)}if(d&&$(".video-bg video").each(function(){this.pause()}),g&&$(".sketch").each(function(){var e=this;a(this.id,function(a){a.noLoop(),$(e).css({visibility:"hidden",opacity:0})})}),Modernizr.cssanimations)h||!e.hasClass("in")?(Modernizr.opacity&&$(".page.in .page-paper").cssAnOnly({"background-color":"rgba(0, 0, 0, 0)"}),$("img.in").removeClass("in").addClass(k+" out"),h?h(l):(e.one(b,l),e.removeClass(k+" out").addClass("animated "+y+" in over"))):l();else if($("img.in").removeClass("sf-in"),h||e.addClass("sf-in over"),$("img.in").each(function(){var e=$(this),a=e.css("height");e.hasClass("sf-in")||e.css("top")==a||e.animate({top:a},v,function(){$(this).removeClass("in")})}),h)h(l);else{var u=e.css("left"),m=e.css("width");e.addClass("in over"),e.css({left:"-"+m,top:"",opacity:0}),e.animate({left:u,opacity:1},v,function(){e.css({left:"",top:""}),l()})}})}var p=e.hash;p=p&&"#"!=p?p.replace("#!","#"):"#index",r=p;var l=$(p);if(!(l.length<1)){$(".page.in").length>0&&($("#side-nav a").css("color","#FF7D8D"),Modernizr.opacity&&t.cssAn({"background-color":"rgba(0, 0, 0, 0.7)"}));var h=function(){if(g){var e=_[k].src;$.cookie("lastSketchCursor",k);var o,i=e.replace("/","-").replace(".","-")+"-"+k;if(0===$("#"+i).length){var o=$('<canvas id="'+i+'" class="sketch" tabindex="0"></canvas>');$(p+" .page-content").prepend(o),Processing.loadSketchFromSources(i,[e]),a(i,function(){o.cssAn({opacity:1})})}else{var n=$("#"+i);n.detach(),$(p+" .page-content").prepend(n),a(i,function(e){var a=$(p+" .page-paper");e.size(a.width(),a.height()),n.css({visibility:"visible"}).cssAn({opacity:1}),e.loop()})}k<_.length-1?k++:k=0}},u=function(){var e=[],a=function(){d&&e.push(function(){n(x,"img-bg-wrap","video-bg-wrap",null)})},o=function(){e.push(function(){n(T,"sketch-bg-wrap",null,g?h:null)})};return o(),o(),o(),a(),o(),a(),o(),a(),a(),e}();u[y](),y<u.length-1?y++:y=0,$.cookie("lastFxCursor",y)}}var o=!1,i=!1,n=null,t=$("#side-nav"),s=t.css("background-color");$("a").each(function(){this.hash&&(this.hash=this.hash.replace("#","#!"))}),$(window).on("resize",function(){$("#page-wrapper>img.in").each(function(){adjustImg(this)})}),e(location),$("a").click(function(a){function s(){$(".video-bg video").each(function(){this.pause()}),$("#off").css({display:"none"}),$("#on").css({display:"block"}),t.cssAn({opacity:.3});var e=$("#off-bg");e.css({display:"table","background-image":"url(/images/fuzz.gif)"}),setTimeout(function(){e.cssAn({opacity:1})}),o=!0,n=location.hash}function r(){$("#off").css({display:"block"}),$("#on").css({display:"none"});var e=$("#off-bg");e.cssAn({opacity:0}),t.cssAn({opacity:1});var a=$.support.transition?300:v;setTimeout(function(){e.css({display:"none","background-image":"none"})},a);var i=$(".video-bg video.in");i.length>0&&($(".video-bg video").each(function(){this.pause()}),i[0].play()),o=!1}if("?off=1"===this.search)o||s(),a.preventDefault();else if("?on=1"==this.search)o&&r(),a.preventDefault();else if(i)a.preventDefault();else{o&&r();var c=location.hash?location.href.replace(location.hash,""):location.href.replace(/#$/,""),p=this.hash?this.href.replace(this.hash,""):this.href.replace(/#$/,"");this.hash&&p==c?(e(this),n=this.hash,location.hash=this.hash,a.preventDefault()):p==c&&(e(this),n="",location.hash="",a.preventDefault())}}),$(window).on("hashchange",function(){var a="#"==location.hash?"":location.hash;a!==n&&e(location)})}function n(){var e=$("#sequence");if(e.length>0){var a={nextButton:!0,prevButton:!0,pagination:!0,animateStartingFrameIn:!0,autoPlay:!0,pauseOnHover:!1,autoPlayDelay:3e3,preloader:!0,preloadTheseFrames:[1],preloadTheseImages:["images/newbigjob-t.png","images/newbigjob-m-t.png","images/mobivisor-t.png","images/surwave-t.png","images/surwave-m-t.png","images/vreggy-t.png","images/sigmahome-t.png","images/hitechhow-t.png","images/hth-crm-t.png","images/frescostudio-t.png"]},o=function(){$("#sequence>.sequence-canvas div[data-img]").each(function(){var e=$(this),a=e.attr("data-img"),o=$(window).width(),i=$(window).height();Modernizr.mq("only all")&&(580>=o||602>=i?a=a.replace(".png","-c.png"):925>=o||695>=i?a=a.replace(".png","-b.png"):(1199>=o||755>=i)&&(a=a.replace(".png","-a.png")));var n=e.find("img");(n.length<1||n.attr("src")!==a)&&(e.empty(),$('<img src="'+a+'" />').appendTo(e))})};$("#sequence .sequence-pagination .view").length<1&&($("#sequence>.sequence-canvas>li>.view").each(function(){var e=$(this).clone();e.find("div[data-img]").each(function(){var e=$(this);src=e.attr("data-img").replace(".png","-t.png"),$('<img src="'+src+'" />').appendTo(e)}),e.appendTo("#sequence .sequence-pagination")}),o(),$(window).on("resize",o)),c=$("#sequence").sequence(a).data("sequence"),c.pause()}}function t(){if(!Modernizr.opacity){for(var e=[["#top-nav",70],["#top-nav .navbar-toggle",80],["#top-nav .navbar-toggle:focus",20],["#top-nav li.navbar-text",80],["#side-nav",75],[".page-paper",90],[".page-content i",72],["#off-bg i",20],[".center-menu, .page-box",70],[".descr",70]],a=$("head"),o='<style type="text/css">',i=0;i<e.length;i++)o+=e[i][0]+' {-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity='+e[i][1]+')";}';o+="</style>",a.append($(o))}}$.fn.cssAn=function(e){return Modernizr.cssanimations?this.css(e):this.animate(e,v)},$.fn.cssAnOnly=function(e){return Modernizr.cssanimations?this.css(e):this},$("html").hasClass("ie8"),$("html").hasClass("ie9"),$("html").hasClass("ie10");var s,r,c,p=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,l=-1!=navigator.appVersion.indexOf("Win"),h=function(){try{var e=document.createElement("canvas"),a=e.getContext("webgl")||e.getContext("experimental-webgl"),o=window.WebGLRenderingContext&&a?!0:!1,i=a.getSupportedExtensions(),n=l&&p&&-1==i.join().indexOf("compressed_texture");return o&&!n}catch(t){return!1}}(),d=function(){var e=document.createElement("video");return canMP4=e.canPlayType?e.canPlayType("video/mp4"):!1,canMP4&&h&&!Modernizr.touch}(),u=Modernizr.csstransforms,g=Modernizr.canvas,v=800,f=["fadeInLeft","fadeInRight","fadeInDown","fadeInUp"],m=0,b="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",w=function(){function e(e){var a="last-cursor-"+e,o=$.cookie(a);return o?o:($.cookie(a,0),0)}return{"img-bg-wrap":e("img-bg-wrap"),"sketch-bg-wrap":e("sketch-bg-wrap")}}(),y=function(){var e=$.cookie("lastFxCursor");return e?e:($.cookie("lastFxCursor",0),0)}(),k=function(){var e=$.cookie("lastSketchCursor");return e?e:($.cookie("lastSketchCursor",0),0)}(),C=(function(){var e=$.cookie("lastThreeCursor");return e?e:($.cookie("lastThreeCursor",0),0)}(),1),x=[{src:"video/cross6_(loop)_1280x720.mp4",w:1280,h:720,link:"http://vimeo.com/11162767",author:"beeple"},{src:"video/lightgrid_(loop)_1280x720.mp4",w:1280,h:720,link:"http://vimeo.com/76432043",author:"beeple"},{src:"video/datacity_(loop)_1280x720.mp4",w:1280,h:720,link:"http://vimeo.com/29966720",author:"beeple"},{src:"video/rmx_(loop)_1280x560.mp4",w:1280,h:560,audio:!0,link:"http://vimeo.com/79293746",author:"beeple"}],T=[{src:"video/lightgrid_(loop)_1280x720.jpg",w:1280,h:720,link:"http://vimeo.com/76432043",author:"beeple"},{src:"video/cross6_(loop)_1280x720.jpg",w:1280,h:720,link:"http://vimeo.com/11162767",author:"beeple"},{src:"video/lightgrid_(loop)_1280x720-a.jpg",w:1280,h:720,link:"http://vimeo.com/76432043",author:"beeple"},{src:"video/cross6_(loop)_1280x720-a.jpg",w:1280,h:720,link:"http://vimeo.com/11162767",author:"beeple"},{src:"video/lightgrid_(loop)_1280x720-c.jpg",w:1280,h:720,link:"http://vimeo.com/76432043",author:"beeple"},{src:"video/cross6_(loop)_1280x720-c.jpg",w:1280,h:720,link:"http://vimeo.com/11162767",author:"beeple"},{src:"video/lightgrid_(loop)_1280x720-b.jpg",w:1280,h:720,link:"http://vimeo.com/76432043",author:"beeple"},{src:"video/cross6_(loop)_1280x720-b.jpg",w:1280,h:720,link:"http://vimeo.com/11162767",author:"beeple"}],_=[{src:"pde/hello-processing.pde"},{src:"pde/swarming-circles.pde"},{src:"pde/motion-frequency.pde"}];o(),n(),e(T,"sketch-bg-wrap"),d&&e(x,"img-bg-wrap","video-bg-wrap"),i(),t()})}.call(this);